# =============================================================================
# PRODUCTION ENVIRONMENT CONFIGURATION
# =============================================================================
# This is a template for production environment variables
# Copy this file to .env in your production environment and update all values
# NEVER commit the actual .env file to version control!
# =============================================================================

# -----------------------------------------------------------------------------
# Node Environment
# -----------------------------------------------------------------------------
NODE_ENV=production
PORT=3000

# -----------------------------------------------------------------------------
# Database Configuration
# -----------------------------------------------------------------------------
# MongoDB Connection String (recommended: MongoDB Atlas for production)
# Format: mongodb+srv://username:password@cluster.mongodb.net/database
DATABASE_URL=mongodb+srv://USERNAME:PASSWORD@cluster0.xxxxx.mongodb.net/finarva?retryWrites=true&w=majority

# OR PostgreSQL Connection String (if using Azure PostgreSQL)
# DATABASE_URL=postgresql://USERNAME:PASSWORD@HOST:5432/finarva?schema=public

# -----------------------------------------------------------------------------
# Redis Configuration (from Terraform output)
# -----------------------------------------------------------------------------
REDIS_HOST=your-redis-name.redis.cache.windows.net
REDIS_PORT=6380
REDIS_PASSWORD=your-redis-primary-key-from-terraform-output
REDIS_TLS=true

# -----------------------------------------------------------------------------
# JWT Authentication
# -----------------------------------------------------------------------------
# Generate with: openssl rand -base64 32
JWT_SECRET=CHANGE_ME_USE_openssl_rand_base64_32
JWT_REFRESH_SECRET=CHANGE_ME_USE_openssl_rand_base64_32
JWT_EXPIRATION=15m
JWT_REFRESH_EXPIRATION=7d

# -----------------------------------------------------------------------------
# AI Services
# -----------------------------------------------------------------------------
# OpenAI
OPENAI_API_KEY=sk-proj-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
OPENAI_MODEL=gpt-4-turbo-preview
OPENAI_MAX_TOKENS=4096

# Google Gemini
GOOGLE_AI_API_KEY=AIzaSyxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
GOOGLE_AI_MODEL=gemini-1.5-pro

# Pinecone Vector Database
PINECONE_API_KEY=xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx
PINECONE_ENVIRONMENT=gcp-starter
PINECONE_INDEX=finarva-vectors

# -----------------------------------------------------------------------------
# Payment Processing
# -----------------------------------------------------------------------------
# Stripe (Production Keys)
# STRIPE_SECRET_KEY=your-stripe-secret-key-here
# STRIPE_PUBLISHABLE_KEY=your-stripe-publishable-key-here
# STRIPE_WEBHOOK_SECRET=your-stripe-webhook-secret-here

# -----------------------------------------------------------------------------
# Email Service
# -----------------------------------------------------------------------------
# SendGrid, AWS SES, or other email provider
SMTP_HOST=smtp.sendgrid.net
SMTP_PORT=587
SMTP_USER=apikey
SMTP_PASSWORD=SG.xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
SMTP_FROM=noreply@finarva.com

# -----------------------------------------------------------------------------
# Application URLs
# -----------------------------------------------------------------------------
APP_URL=https://api.finarva.com
FRONTEND_URL=https://finarva.com
ALLOWED_ORIGINS=https://finarva.com,https://www.finarva.com,https://app.finarva.com

# -----------------------------------------------------------------------------
# Azure Application Insights (from Terraform output)
# -----------------------------------------------------------------------------
APPINSIGHTS_INSTRUMENTATIONKEY=xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx
APPINSIGHTS_CONNECTION_STRING=InstrumentationKey=xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx;IngestionEndpoint=https://eastus-8.in.applicationinsights.azure.com/

# -----------------------------------------------------------------------------
# Azure Blob Storage (from Terraform output - for file uploads)
# -----------------------------------------------------------------------------
AZURE_STORAGE_ACCOUNT_NAME=stfinarvaproduction
AZURE_STORAGE_ACCOUNT_KEY=your-storage-account-key-from-terraform-output
AZURE_STORAGE_CONTAINER_NAME=uploads

# -----------------------------------------------------------------------------
# Rate Limiting
# -----------------------------------------------------------------------------
RATE_LIMIT_TTL=60
RATE_LIMIT_MAX=100
RATE_LIMIT_AUTH_TTL=60
RATE_LIMIT_AUTH_MAX=200

# -----------------------------------------------------------------------------
# CORS Configuration
# -----------------------------------------------------------------------------
CORS_ENABLED=true
CORS_CREDENTIALS=true

# -----------------------------------------------------------------------------
# Logging Configuration
# -----------------------------------------------------------------------------
LOG_LEVEL=info
LOG_FORMAT=json
LOG_FILE_PATH=/opt/finarva/logs/app.log
LOG_MAX_FILES=10
LOG_MAX_SIZE=10m

# -----------------------------------------------------------------------------
# Queue Configuration (BullMQ)
# -----------------------------------------------------------------------------
QUEUE_CONCURRENCY=5
QUEUE_MAX_RETRIES=3

# -----------------------------------------------------------------------------
# File Upload Limits
# -----------------------------------------------------------------------------
MAX_FILE_SIZE=10485760  # 10MB in bytes
ALLOWED_FILE_TYPES=image/jpeg,image/png,image/gif,application/pdf

# -----------------------------------------------------------------------------
# Security Headers
# -----------------------------------------------------------------------------
HELMET_ENABLED=true
CSP_ENABLED=true
HSTS_MAX_AGE=31536000

# -----------------------------------------------------------------------------
# Session Configuration
# -----------------------------------------------------------------------------
SESSION_SECRET=CHANGE_ME_USE_openssl_rand_base64_32
SESSION_MAX_AGE=86400000  # 24 hours in milliseconds

# -----------------------------------------------------------------------------
# Feature Flags
# -----------------------------------------------------------------------------
ENABLE_SWAGGER=false  # Disable in production for security
ENABLE_GRAPHQL_PLAYGROUND=false
ENABLE_DEBUG_ENDPOINTS=false

# -----------------------------------------------------------------------------
# Third-Party Integrations
# -----------------------------------------------------------------------------
# Sentry for error tracking
SENTRY_DSN=https://xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx@o123456.ingest.sentry.io/7654321

# Google Analytics
GA_TRACKING_ID=UA-XXXXXXXXX-X

# -----------------------------------------------------------------------------
# Timezone & Localization
# -----------------------------------------------------------------------------
TZ=UTC
DEFAULT_LOCALE=en-US

# -----------------------------------------------------------------------------
# Cron Jobs
# -----------------------------------------------------------------------------
ENABLE_CRON_JOBS=true
BACKUP_SCHEDULE=0 2 * * *  # Daily at 2 AM

# -----------------------------------------------------------------------------
# Monitoring & Health Checks
# -----------------------------------------------------------------------------
HEALTH_CHECK_TIMEOUT=5000
HEALTH_CHECK_INTERVAL=30000

# -----------------------------------------------------------------------------
# Cache TTL (seconds)
# -----------------------------------------------------------------------------
CACHE_TTL_DEFAULT=3600
CACHE_TTL_USER=1800
CACHE_TTL_STATIC=86400

# =============================================================================
# SECURITY CHECKLIST
# =============================================================================
# ✅ All secrets are randomly generated and strong
# ✅ Database credentials are unique and complex
# ✅ JWT secrets are at least 32 characters
# ✅ Production API keys are used (not test keys)
# ✅ HTTPS is enforced (APP_URL starts with https)
# ✅ Debug features are disabled (ENABLE_SWAGGER=false)
# ✅ CORS is properly configured with specific origins
# ✅ Rate limiting is enabled and properly configured
# ✅ Error tracking (Sentry) is configured
# ✅ Application Insights is configured for monitoring
# =============================================================================
